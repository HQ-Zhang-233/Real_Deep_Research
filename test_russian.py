import asyncio
from processors.text_processor import TextProcessor

async def main():
    processor = TextProcessor()
    text = """```xml\n<planning>\n我分析了用户关于 “deepresearch 这类产品” 的研究需求和 Quick Search 结果。  根据乔哈里视窗框架，目前我对 “deepresearch 产品” 有了初步了解，从 **未知区** 进入了 **隐藏区**。  我的规划思路是：\n\n1.  **分析 Quick Search 结果：**  快速浏览和分析 Quick Search 结果，提取关键信息。  初步判断 “deepresearch 产品” 应该是指 **利用 AI 技术进行深度研究和分析的工具或平台**，例如 OpenAI 和 Google 都推出了名为 \"Deep Research\" 的产品。 这些产品的功能可能包括 **自动化信息搜集、文献分析、报告生成** 等。  关键词包括 \"OpenAI\", \"Google\", \"Gemini\", \"Perplexity AI\", \"AI\", \"research tool\", \"report\", \"analysis\", \"in-depth research\"。\n\n2.  **构建初步研究框架和 Todo List：**  基于初步理解，构建一个研究框架，并将其转化为可执行的 Todo List。  研究框架可以包括以下方面：\n    *   **定义和概念：**  什么是 “deepresearch 产品”？ 核心概念和特点是什么？\n    *   **主要功能和应用场景：**  “deepresearch 产品” 主要有哪些功能？ 可以应用在哪些场景？ 解决什么问题？\n    *   **市场参与者和主要产品：**  目前市场上有哪些主要的 “deepresearch 产品”？ 例如 OpenAI Deep Research, Google Gemini Deep Research, Perplexity Deep Research 等。  它们各自的特点和优势是什么？\n    *   **优势和局限性：**  使用 “deepresearch 产品” 进行研究的优势和局限性是什么？ 相对于传统研究方法，有哪些提升和不足？\n    *   **未来发展趋势：**  “deepresearch 产品” 的未来发展趋势是什么？\n\n    基于以上研究框架，我可以创建一个初步的 Todo List，将研究任务分解为 “信息收集”、“分析与撰写” 和 “报告生成” 三个阶段。\n\n3.  **向用户提问， уточнить 研究方向：**  虽然通过 Quick Search 有了初步了解，但用户的具体研究兴趣和关注点仍然不明确。  为了更好地聚焦研究，需要向用户提问， уточнить  他们希望重点研究 “deepresearch 产品” 的哪些方面。  例如，是更关注 **产品的功能和技术特点**， 还是更关注 **市场竞争格局和应用前景**， 还是其他方面？\n\n**信息获取策略：**  在初步 Quick Search 的基础上，下一步需要更深入的信息收集。  我计划在构建初步 Todo List 后，先向用户提问 уточнить 研究方向。  根据用户的反馈，再决定是否需要进行更深入的 Quick Search 或指派 Search Agent 进行信息收集。\n\n**下一步行动：**  输出初步的 Todo List，并使用 `<message_ask_user>` 标签向用户提问， уточнить 研究方向。\n</planning>\n\n<todo_list>\n# DeepResearch 产品调研任务清单\n\n## 信息收集阶段\n- [ ] 收集关于 “DeepResearch 产品” 的定义、核心概念和特点的信息\n- [ ] 调研 “DeepResearch 产品” 的主要功能、应用场景和解决的问题\n- [ ] 调研市场上主要的 “DeepResearch 产品” 和平台，例如 OpenAI Deep Research, Google Gemini Deep Research, Perplexity Deep Research 等，并比较它们的功能和特点\n- [ ] 收集关于 “DeepResearch 产品” 的优势、局限性以及与传统研究方法的对比分析信息\n- [ ] 调研 “DeepResearch 产品” 的未来发展趋势和潜在的应用方向\n\n## 分析与撰写阶段\n- [ ] 撰写 “DeepResearch 产品定义和核心概念” 的章节\n- [ ] 分析和总结 “DeepResearch 产品” 的主要功能、应用场景和解决的问题\n- [ ] 对比分析市场上主要的 “DeepResearch 产品” 和平台，总结它们各自的优势和特点\n- [ ] 撰写 “DeepResearch 产品” 的优势、局限性分析报告，并与传统研究方法进行对比\n- [ ] 分析和预测 “DeepResearch 产品” 的未来发展趋势\n\n## 报告生成阶段\n- [ ] 整合分析内容，撰写 DeepResearch 产品调研报告初稿\n- [ ] 内部评审和修改调研报告\n- [ ] 生成最终 DeepResearch 产品调研报告并提交\n</todo_list>\n\n<message_ask_user>\n您好！ 针对您 “deepresearch 这类产品” 的调研需求，我进行了一些快速搜索，对 “deepresearch 产品” 有了初步了解。  **初步判断这类产品是利用 AI 技术进行深度研究和分析的工具或平台，可以自动化信息搜集、文献分析、报告生成等。**  例如，OpenAI 和 Google 都有推出名为 \"Deep Research\" 的产品。  我已经为您创建了一个初步的研究任务清单 (您可以在单独的页面中查看)。\n\n为了更好地聚焦您的研究方向，能否请您 уточнить  **您希望重点研究 “deepresearch 产品” 的哪些方面呢？**  例如：\n\n1.  **产品定义和功能特点：** 您是否更关注 “deepresearch 产品” 的 **核心概念、技术原理、主要功能和特点**？\n2.  **市场和应用前景：**  您是否更关注 “deepresearch 产品” 的 **市场竞争格局、主要参与者、应用场景和未来发展趋势**？\n3.  **具体产品案例分析：** 您是否希望深入分析 **某几款具体的 “deepresearch 产品”**，例如 OpenAI Deep Research, Google Gemini Deep Research, Perplexity Deep Research 等？  如果是，您更关注哪几款产品呢？\n4.  **优势与局限性分析：** 您是否希望重点分析 “deepresearch 产品” 相对于传统研究方法的 **优势和局限性**？\n\n请您 уточнить  您的研究重点，这将有助于我更精准地规划后续的调研任务。\n</message_ask_user>\n```"
  """
    
    try:
        result = await processor.process_russian_text(text)
        print('\n原文:\n', text)
        print('\n处理后:\n', result)
    except Exception as e:
        print('错误:', str(e))

if __name__ == '__main__':
    asyncio.run(main())